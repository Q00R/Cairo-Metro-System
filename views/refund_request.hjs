<!DOCTYPE html>
<html>
  <head>
    <title>Courses</title>
    <link rel='stylesheet' href='/styles/bootstrap.min.css' />
    <link rel='stylesheet' href='/styles/style.css' />
    <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
  </head>
  <body>
  <script>
      $(document).ready(function(){
        $("#submit").click(function() {
          const ticketId = $('#myDropdown').val();
          if(ticketId === 'default') {
            alert('Please select a ticket');
            window.location.href = '/requests/refund'; 
          }
          const url = `/api/v1/refund/${ticketId}`;


          $.ajax({
            type: "POST",
            url,

            success: function(serverResponse) {
              if(serverResponse) {
                alert('Ticket refund request submitted successfully' + serverResponse.responseText);
              }
            },
            error: function(errorResponse) {
              if(errorResponse) {
                alert(`Something went wrong: ${errorResponse.responseText}`);
              }            
            }
          });
        });
      });
      </script>    
    <div>
      <div>
        <nav class="navbar navbar-inverse" style="padding-left:1%;">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/dashboard">Home</a></li>
            <li><a href="/stations">Station</a></li>
            <li><a href="/users">Users</a></li>
            {{#isNormal}}
              <li><a href="/requests/refund">Refund Ticket</a></li>
              <li><a href="/requests/senior">Senior Citizens</a></li>
            {{/isNormal}}
          </ul>
          <ul class="nav navbar-nav navbar-right" style="padding-right:2%">
            <li><a style="color:goldenrod" href="/resetPassword">Reset Password</a></li>
            <li><a  style="color:crimson" href="/">Logout</a></li>
          </ul>

       </nav>
      </div>

      <div style="margin-left: auto; margin-right: auto; padding-bottom: 5%;">
        <h1 style="text-align: center;">Apply For Refund Requests</h1>
      </div>

        <div style="margin-left: auto; margin-right: auto; padding-left: 30%;">
        <form id="myForm" method="post">
            <select id="myDropdown" class="btn btn-secondary btn-lg dropdown-toggle">
                <option disabled selected value="-1">Select a ticket</option>
                {{#userTickets}}
                    <option value={{id}}>{{id}}</option>                    
                {{/userTickets}}
            </select>
        <input id="submit" class="btn btn-primary" name="submit" type="button" value="Place Request">
        </form>
        </div>

        
    </div>
  </body>
  </html>
